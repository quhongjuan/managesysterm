<!DOCTYPE html>

<!--[if IE 8]>
<html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]>
<html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<!--<![endif]-->
<!-- BEGIN HEAD -->

<head>
    <meta charset="utf-8"/>
    <title>发布考题</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1" name="viewport"/>
    <meta content="" name="description"/>
    <meta content="" name="author"/>
    <!-- BEGIN GLOBAL MANDATORY STYLES -->
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=all" rel="stylesheet"
          type="text/css"/>
    <link th:href="@{/assets/global/plugins/font-awesome/css/font-awesome.min.css}" rel="stylesheet" type="text/css"/>
    <link th:href="@{/assets/global/plugins/simple-line-icons/simple-line-icons.min.css}" rel="stylesheet"
          type="text/css"/>
    <link th:href="@{/assets/global/plugins/bootstrap/css/bootstrap.min.css}" rel="stylesheet" type="text/css"/>
    <link th:href="@{/assets/global/plugins/uniform/css/uniform.default.css}" rel="stylesheet" type="text/css"/>
    <link th:href="@{/assets/global/plugins/bootstrap-switch/css/bootstrap-switch.min.css}" rel="stylesheet"
          type="text/css"/>
    <!-- END GLOBAL MANDATORY STYLES -->
    <!-- BEGIN PAGE LEVEL PLUGINS -->
    <link th:href="@{/assets/global/plugins/bootstrap-daterangepicker/daterangepicker.min.css}" rel="stylesheet"
          type="text/css"/>
    <link th:href="@{/assets/global/plugins/bootstrap-datepicker/css/bootstrap-datepicker3.min.css}" rel="stylesheet"
          type="text/css"/>
    <link th:href="@{/assets/global/plugins/bootstrap-timepicker/css/bootstrap-timepicker.min.css}" rel="stylesheet"
          type="text/css"/>
    <link th:href="@{/assets/global/plugins/bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css}"
          rel="stylesheet" type="text/css"/>
    <link th:href="@{/assets/global/plugins/clockface/css/clockface.css}" rel="stylesheet}" type="text/css"/>
    <!-- END PAGE LEVEL PLUGINS -->

    <!-- BEGIN THEME GLOBAL STYLES -->
    <link th:href="@{/assets/global/css/components-md.min.css}" rel="stylesheet" id="style_components" type="text/css"/>
    <link th:href="@{/assets/global/css/plugins-md.min.css}" rel="stylesheet" type="text/css"/>
    <!-- END THEME GLOBAL STYLES -->
    <!-- BEGIN THEME LAYOUT STYLES -->
    <link th:href="@{/assets/layouts/layout4/css/layout.min.css}" rel="stylesheet" type="text/css"/>
    <link th:href="@{/assets/layouts/layout4/css/themes/light.min.css}" rel="stylesheet" type="text/css"
          id="style_color"/>
    <link th:href="@{/assets/layouts/layout4/css/custom.min.css}" rel="stylesheet" type="text/css"/>

<body class="page-container-bg-solid page-header-fixed page-sidebar-closed-hide-logo page-md">
<div th:replace="~{commons/common::header}"></div>
<!-- BEGIN HEADER & CONTENT DIVIDER -->
<div class="clearfix"></div>
<!-- END HEADER & CONTENT DIVIDER -->

<!-- BEGIN CONTAINER -->
<div class="page-container">
    <div th:replace="~{commons/common::sider}"></div>
    <!-- BEGIN CONTENT -->
    <div class="page-content-wrapper">
        <!-- BEGIN CONTENT BODY -->
        <div class="page-content">
            <!-- BEGIN PAGE HEAD-->
            <div class="page-head">
                <!-- BEGIN PAGE TITLE -->
                <div class="page-title">
                    <h1>上传试卷
                        <small>补全基本信息</small>
                    </h1>
                </div>
                <!-- END PAGE TITLE -->
            </div>
            <!-- END PAGE HEAD-->
            <!-- BEGIN PAGE BASE CONTENT -->
            <div class="row">
                <div class="col-md-1"></div>
                <div class="col-md-9">
                    <!-- BEGIN SAMPLE FORM PORTLET-->
                    <div class="portlet light bordered">
                        <div class="portlet-title">
                            <div class="caption">
                                <i class="icon-bubble font-green-sharp"></i>
                                <span class="caption-subject font-green-sharp bold uppercase">基本信息表</span>
                            </div>
                            <div class="actions">
                                <div class="btn-group">
                                    <a class="btn btn-sm green dropdown-toggle" href="javascript:;"
                                       data-toggle="dropdown"> 操作
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div class="portlet-body form">
                            <form role="form" id="form" onsubmit="return false;" enctype ="multipart/form-data">
                                <div class="form-body">
                                    <div class="row">
                                        <div class="col-md-4"></div>
                                        <div class="col-md-8">
                                            <div class="form-group">
                                                <label>试卷标题</label>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="input-group">
                                                            <span class="input-group-addon">
                                                                <i class="icon-pencil"></i>
                                                    </span>
                                                            <input name="title" id="title" type="text"
                                                                   class="form-control"
                                                                   placeholder="试卷标题">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label>发布时间</label>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="input-group input-medium date date-picker"
                                                             data-date-format="yyyy-mm-dd" data-date-start-date="+0d">
                                                            <input type="text" class="form-control" id="releaseTime" name="releaseTime" readonly/>
                                                            <span class="input-group-btn">
                                                            <button class="btn default" type="button">
                                                                <i class="fa fa-calendar"></i>
                                                            </button>
                                                        </span>
                                                        </div>
                                                        <br/>
                                                        <div class="input-icon">
                                                            <i class="fa fa-clock-o"></i>
                                                            <input class="form-control timepicker timepicker-default" id="releaseTime2" name="releaseTime2"   type="text">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label>结束时间</label>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="input-group input-medium date date-picker"
                                                             data-date-format="yyyy-mm-dd" data-date-start-date="+0d">
                                                            <input type="text" class="form-control" id="endTime" name="endTime" readonly>
                                                            <span class="input-group-btn">
                                                            <button class="btn default" type="button">
                                                                <i class="fa fa-calendar"></i>
                                                            </button>
                                                        </span>
                                                        </div>
                                                        <br/>
                                                        <div class="input-icon">
                                                            <i class="fa fa-clock-o"></i>
                                                            <input class="form-control timepicker timepicker-default" id="endTime2" name="endTime2" type="text">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label>考试码</label>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="input-group">
                                                    <span class="input-group-addon">
                                                        <i class="fa fa-bell-o font-green"></i>
                                                    </span>
                                                            <input type="text" class="form-control" id="stuCode" name="stuCode" disabled="true">
                                                        </div>
                                                    </div>
                                                    <button class="btn grey-mint btn-outline sbold uppercase"
                                                            type="button"  onclick="create1()">生成
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label>监考码</label>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="input-group">
                                                    <span class="input-group-addon">
                                                        <i class="fa fa-bell-o font-green"></i>
                                                    </span>
                                                            <input type="text" class="form-control" id="teaCode" name="teaCode" disabled="true">
                                                        </div>
                                                    </div>
                                                    <button class="btn grey-mint btn-outline sbold uppercase"
                                                            type="button" onclick="create2()">生成
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label>文件上传（只支持.pdf）</label>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="input-group">
                                                            <input name="title" id="context" type="file" accept=".pdf"
                                                                   class="style_file_content">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-actions right">
                                                <button type="button" class="btn default">取消</button>
                                                <button type="submit" class="btn green">上传</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                    <!-- END SAMPLE FORM PORTLET-->

                </div>
            </div>
            <!-- END PAGE BASE CONTENT -->
        </div>
        <!-- END CONTENT BODY -->
    </div>
    <!-- END CONTENT -->
    <!-- BEGIN QUICK SIDEBAR -->
    <a href="javascript:;" class="page-quick-sidebar-toggler">
        <i class="icon-login"></i>
    </a>

</div>

<div th:replace="~{commons/common::footer}"></div>
<!-- END FOOTER -->
<!--[if lt IE 9]>
<script th:src="@{/assets/global/plugins/respond.min.js}"></script>
<script th:src="@{/assets/global/plugins/excanvas.min.js}"></script>
<![endif]-->
<!-- BEGIN CORE PLUGINS -->
<script th:src="@{/assets/global/plugins/jquery.min.js}" type="text/javascript"></script>
<script th:src="@{/assets/global/plugins/bootstrap/js/bootstrap.min.js}" type="text/javascript"></script>
<script th:src="@{/assets/global/plugins/js.cookie.min.js}" type="text/javascript"></script>
<script th:src="@{/assets/global/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js}"
        type="text/javascript"></script>
<script th:src="@{/assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js}" type="text/javascript"></script>
<script th:src="@{/assets/global/plugins/jquery.blockui.min.js}" type="text/javascript"></script>
<script th:src="@{/assets/global/plugins/uniform/jquery.uniform.min.js}" type="text/javascript"></script>
<script th:src="@{/assets/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js}" type="text/javascript"></script>
<!-- END CORE PLUGINS -->

<!-- BEGIN PAGE LEVEL PLUGINS -->
<script th:src="@{/assets/global/plugins/moment.min.js}" type="text/javascript}"></script>
<script th:src="@{/assets/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.min.js}"
        type="text/javascript"></script>
<script th:src="@{/assets/global/plugins/bootstrap-timepicker/js/bootstrap-timepicker.min.js}"
        type="text/javascript"></script>
<script th:src="@{/assets/global/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js}"
        type="text/javascript"></script>
<script th:src="@{/assets/global/plugins/clockface/js/clockface.js}" type="text/javascript}"></script>
<!-- END PAGE LEVEL PLUGINS -->


<!-- BEGIN THEME GLOBAL SCRIPTS -->
<script th:src="@{/assets/global/scripts/app.min.js}" type="text/javascript"></script>
<!-- END THEME GLOBAL SCRIPTS -->
<!-- BEGIN PAGE LEVEL SCRIPTS -->
<script th:src="@{/assets/pages/scripts/components-date-time-pickers.min.js}" type="text/javascript"></script>
<!-- END PAGE LEVEL SCRIPTS -->
<!-- BEGIN PAGE LEVEL SCRIPTS -->
<script th:src="@{/assets/pages/scripts/ui-buttons.min.js}" type="text/javascript"></script>
<!-- END PAGE LEVEL SCRIPTS -->

<!-- BEGIN THEME LAYOUT SCRIPTS -->
<script th:src="@{/assets/layouts/layout4/scripts/layout.min.js}" type="text/javascript"></script>
<script th:src="@{/assets/layouts/layout4/scripts/demo.min.js}" type="text/javascript"></script>
<script th:src="@{/assets/layouts/global/scripts/quick-sidebar.min.js}" type="text/javascript"></script>
<!-- END THEME LAYOUT SCRIPTS -->
</body>

<script>
    function create1() {
        $.ajax({
            type:'post',
            url:'/createString',
            success:function (data) {
                document.getElementById("stuCode").value = data.toString();
            }
        });
    }
    function create2() {
        $.ajax({
            type:'post',
            url:'/createString',
            success:function (data) {
                document.getElementById("teaCode").value = data.toString();
            }
        });
    }
</script>
<script type="text/javascript">
    $(document).ready(function () {
        $("form").submit(function () {
            var file = $("#context")[0].files[0];
            var formData = new FormData();
            formData.append("context",file);

            formData.append("title",$("#title").val());
            formData.append("releaseTime",$("#releaseTime").val());
            formData.append("releaseTime2",$("#releaseTime2").val());
            formData.append("endTime",name=$("#endTime").val());
            formData.append("endTime2",$("#endTime2").val());
            formData.append("stuCode",$("#stuCode").val());
            formData.append("teaCode",$("#teaCode").val());


            $.ajax({
                type:"post",
                url:"/upload",
                data: formData,
                processData: false,
                contentType: false,
                traditional: true,
                success:function (data) {
                    alert(data.toString());
                },
                error: function (e) {
                    alert("error");
                }
            });
        }) ;
    });

</script>
</html>